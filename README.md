# **Anime API v1 — Routes**

---

## **Authorization**

> All requests (except `/users/device`) require the header:
> `Authorization: Device <device_id>`
> `device_id` is generated by the server on the first call to `/users/device`.

---

## **Users**

| Method | Route           | Description                         |
| ------ | --------------- | ----------------------------------- |
| GET    | `/users/device` | Create and return a new `device_id` |

---

## **Anime**

### **Consumet**

| Method | Route                            | Query   | Description                             |
| ------ | -------------------------------- | ------- | --------------------------------------- |
| GET    | `/anime/consumet/`               | `query` | Search anime by query                   |
| GET    | `/anime/consumet/genres`         | —       | Get all genres                          |
| GET    | `/anime/consumet/latest`         | —       | Get latest releases                     |
| GET    | `/anime/consumet/recommended`    | —       | Get recommended releases                |
| GET    | `/anime/consumet/genre/releases` | `genre` | Get releases by genre                   |
| GET    | `/anime/consumet/:id`            | —       | Get anime info by Consumet ID           |
| GET    | `/anime/consumet/episode/:id`    | —       | Get episode info by Consumet episode ID |

---

### **Anilibria**

| Method | Route                             | Query          | Description                              |
| ------ | --------------------------------- | -------------- | ---------------------------------------- |
| GET    | `/anime/anilibria/`               | `query`        | Search anime by query                    |
| GET    | `/anime/anilibria/genres`         | —              | Get all genres                           |
| GET    | `/anime/anilibria/latest`         | `limit`        | Get latest releases                      |
| GET    | `/anime/anilibria/random`         | `limit`        | Get random releases                      |
| GET    | `/anime/anilibria/recommended`    | `limit`        | Get recommended releases                 |
| GET    | `/anime/anilibria/genre/releases` | `genre, limit` | Get releases by genre                    |
| GET    | `/anime/anilibria/:id`            | —              | Get anime info by Anilibria ID           |
| GET    | `/anime/anilibria/episode/:id`    | —              | Get episode info by Anilibria episode ID |

---

### **General**

| Method | Route               | Query | Description                     |
| ------ | ------------------- | ----- | ------------------------------- |
| GET    | `/anime/search/:id` | —     | Get anime by internal search ID |

---

## **Timecode**

| Method | Route           | Body / Query | Description                           |
| ------ | --------------- | ------------ | ------------------------------------- |
| GET    | `/timecode/all` | —            | Get all timecodes                     |
| GET    | `/timecode`     | `episodeID`  | Get a timecode for a specific episode |
| POST   | `/timecode`     | JSON body    | Add or update a timecode              |

---

## **History**

| Method | Route          | Body / Query  | Description                   |
| ------ | -------------- | ------------- | ----------------------------- |
| POST   | `/history`     | JSON body     | Add a history entry           |
| GET    | `/history/all` | —             | Get all history entries       |
| GET    | `/history`     | `page, limit` | Get paginated history entries |

---

## **Favourite**

| Method | Route            | Body / Query  | Description                     |
| ------ | ---------------- | ------------- | ------------------------------- |
| POST   | `/favourite`     | JSON body     | Add an anime to favourites      |
| DELETE | `/favourite`     | JSON body     | Remove an anime from favourites |
| GET    | `/favourite/all` | —             | Get all favourites              |
| GET    | `/favourite`     | `page, limit` | Get paginated favourites        |

---

## **Collection**

| Method | Route             | Body / Query  | Description                       |
| ------ | ----------------- | ------------- | --------------------------------- |
| POST   | `/collection`     | JSON body     | Add an anime to a collection      |
| DELETE | `/collection`     | JSON body     | Remove an anime from a collection |
| GET    | `/collection/all` | —             | Get all collections               |
| GET    | `/collection`     | `page, limit` | Get paginated collections         |

---
